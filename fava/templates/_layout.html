{% set navigation_bar = [
    ("",              ['income_statement', 'balance_sheet', 'trial_balance', 'journal', 'query']),
    ("Other",         [ 'holdings', 'net_worth', 'commodities', 'events']),
    ("Configuration", [ 'source', 'options', 'statistics', 'help'])
] %}
{% set all_pages = {
    'income_statement': (_('Income Statement'), 'g i'),
    'balance_sheet':    (_('Balance Sheet'),    'g b'),
    'trial_balance':    (_('Trial Balance'),    'g t'),
    'journal':          (_('Journal'),          'g j'),
    'query':            (_('Query'),            'g q'),
    'holdings':         (_('Holdings'),         'g h'),
    'net_worth':        (_('Net Worth'),        'g w'),
    'commodities':      (_('Commodities'),      'g c'),
    'events':           (_('Events'),           'g e'),
    'source':           (_('Source'),           'g s'),
    'options':          (_('Options'),          'g o'),
    'statistics':       (_('Statistics'),       'g x'),
    'help':             (_('Help'),             'g shift+h'),
} %}
{% set page_title = all_pages[active_page].0 if not page_title else page_title %}
{% set short_title = page_title if not short_title else short_title %}
{% set show_filters = show_filters|default(True) %}
{% set user_queries = api.queries[:config['sidebar-show-queries']] %}
<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='gen/theme_' + config['theme'] + '.css') }}">
    <title>{{ short_title }} - {{ api.title }}</title>
    <script>window.chartData = [];</script>
</head>
<body>
    <header>
        <svg width="24px" height="25px" viewBox="0 0 24 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M14,17.8543527 C14,19.391183 13.5023389,20.7145647 12.5070168,21.8244978 C11.5116946,22.9344308 10.2187762,23.6199777 8.62826138,23.8811384 L8.62826138,26.5178571 C8.62826138,26.6584821 8.58324681,26.7739955 8.49321767,26.8643973 C8.40318853,26.9547991 8.2881513,27 8.14810597,27 L6.12245035,27 C5.99240826,27 5.87987183,26.9522879 5.78484108,26.8568638 C5.68981032,26.7614397 5.64229494,26.6484375 5.64229494,26.5178571 L5.64229494,23.8811384 C4.98208125,23.7907366 4.34437485,23.6350446 3.72917574,23.4140625 C3.11397662,23.1930804 2.60631231,22.9695871 2.2061828,22.7435826 C1.8060533,22.5175781 1.43593351,22.2765067 1.09582342,22.0203683 C0.755713345,21.7642299 0.523138069,21.5758929 0.398097599,21.4553571 C0.273057128,21.3348214 0.185528798,21.2444196 0.13551261,21.1841518 C-0.03454243,20.9732143 -0.0445456677,20.7672991 0.105502897,20.5664062 L1.65100311,18.5323661 C1.72102578,18.4319196 1.83606301,18.3716518 1.99611481,18.3515625 C2.14616338,18.3314732 2.26620223,18.3766741 2.35623137,18.4871652 L2.38624108,18.5172991 C3.51660694,19.5117188 4.73200031,20.1395089 6.03242121,20.4006696 C6.402541,20.4810268 6.77266079,20.5212054 7.14278059,20.5212054 C7.95304284,20.5212054 8.66577352,20.3052455 9.28097264,19.8733259 C9.89617175,19.4414062 10.2037713,18.828683 10.2037713,18.0351562 C10.2037713,17.7539062 10.128747,17.4877232 9.97869846,17.2366071 C9.8286499,16.9854911 9.66109567,16.7745536 9.47603577,16.6037946 C9.29097587,16.4330357 8.99838117,16.2446987 8.59825167,16.0387835 C8.19812216,15.8328683 7.86801532,15.672154 7.60793114,15.5566406 C7.34784696,15.4411272 6.94771745,15.2779018 6.40754262,15.0669643 C6.01741635,14.90625 5.70981679,14.780692 5.48474395,14.6902902 C5.2596711,14.5998884 4.95207154,14.4667969 4.56194527,14.2910156 C4.171819,14.1152344 3.85921783,13.9595424 3.62414174,13.8239397 C3.38906566,13.6883371 3.10647419,13.5100446 2.77636735,13.2890625 C2.44626051,13.0680804 2.1786739,12.8546317 1.97360753,12.6487165 C1.76854116,12.4428013 1.55097074,12.1967076 1.32089627,11.9104353 C1.09082181,11.6241629 0.913264338,11.3328683 0.788223867,11.0365513 C0.663183396,10.7402344 0.558149401,10.40625 0.473121881,10.0345982 C0.388094361,9.66294643 0.345580601,9.27120536 0.345580601,8.859375 C0.345580601,7.47321429 0.835739246,6.2578125 1.81605654,5.21316964 C2.79637383,4.16852679 4.07178663,3.49553571 5.64229494,3.19419643 L5.64229494,0.482142857 C5.64229494,0.3515625 5.68981032,0.238560268 5.78484108,0.143136161 C5.87987183,0.0477120536 5.99240826,0 6.12245035,0 L8.14810597,0 C8.2881513,0 8.40318853,0.0452008929 8.49321767,0.135602679 C8.58324681,0.226004464 8.62826138,0.341517857 8.62826138,0.482142857 L8.62826138,3.13392857 C9.19844593,3.19419643 9.75112481,3.30970982 10.286298,3.48046875 C10.8214712,3.65122768 11.2566121,3.81947545 11.5917205,3.98521205 C11.926829,4.15094866 12.2444318,4.33928571 12.5445289,4.55022321 C12.8446261,4.76116071 13.0396892,4.90680804 13.1297183,4.98716518 C13.2197475,5.06752232 13.2947717,5.13783482 13.3547912,5.19810268 C13.5248462,5.37890625 13.5498543,5.56975446 13.4298155,5.77064732 L12.2144221,7.97042411 C12.1343962,8.12109375 12.0193589,8.20145089 11.8693104,8.21149554 C11.7292651,8.24162946 11.5942213,8.20647321 11.4641793,8.10602679 C11.4341695,8.07589286 11.3616461,8.015625 11.2466088,7.92522321 C11.1315716,7.83482143 10.9365085,7.70172991 10.6614194,7.52594866 C10.3863304,7.35016741 10.0937357,7.18945313 9.78363533,7.0438058 C9.47353496,6.89815848 9.10091436,6.76757813 8.66577352,6.65206473 C8.23063268,6.53655134 7.80299427,6.47879464 7.38285829,6.47879464 C6.43255071,6.47879464 5.6572998,6.69475446 5.05710554,7.12667411 C4.45691128,7.55859375 4.15681415,8.11607143 4.15681415,8.79910714 C4.15681415,9.06026786 4.19932791,9.30133929 4.28435543,9.52232143 C4.36938295,9.74330357 4.5169307,9.95172991 4.72699869,10.1476004 C4.93706668,10.343471 5.13463063,10.5092076 5.31969052,10.6448103 C5.50475042,10.7804129 5.78484108,10.9361049 6.15996249,11.1118862 C6.5350839,11.2876674 6.83768184,11.4232701 7.06775631,11.5186942 C7.29783077,11.6141183 7.64794409,11.7522321 8.11809626,11.9330357 C8.64826785,12.1339286 9.05339898,12.2921317 9.33348963,12.4076451 C9.61358029,12.5231585 9.99370332,12.6989397 10.4738587,12.9349888 C10.9540141,13.1710379 11.3316364,13.3844866 11.6067254,13.5753348 C11.8818144,13.766183 12.1919148,14.0172991 12.5370265,14.328683 C12.8821382,14.640067 13.147224,14.9589844 13.3322839,15.2854353 C13.5173438,15.6118862 13.6748948,15.9960938 13.8049369,16.438058 C13.934979,16.8800223 14,17.3521205 14,17.8543527 L14,17.8543527 Z" fill="#FFFFFF"></path>
            <path d="M24,17.8543527 C24,19.391183 23.5023389,20.7145647 22.5070168,21.8244978 C21.5116946,22.9344308 20.2187762,23.6199777 18.6282614,23.8811384 L18.6282614,26.5178571 C18.6282614,26.6584821 18.5832468,26.7739955 18.4932177,26.8643973 C18.4031885,26.9547991 18.2881513,27 18.148106,27 L16.1224503,27 C15.9924083,27 15.8798718,26.9522879 15.7848411,26.8568638 C15.6898103,26.7614397 15.6422949,26.6484375 15.6422949,26.5178571 L15.6422949,23.8811384 C14.9820813,23.7907366 14.3443749,23.6350446 13.7291757,23.4140625 C13.1139766,23.1930804 12.6063123,22.9695871 12.2061828,22.7435826 C11.8060533,22.5175781 11.4359335,22.2765067 11.0958234,22.0203683 C10.7557133,21.7642299 10.5231381,21.5758929 10.3980976,21.4553571 C10.2730571,21.3348214 10.1855288,21.2444196 10.1355126,21.1841518 C9.96545757,20.9732143 9.95545433,20.7672991 10.1055029,20.5664062 L11.6510031,18.5323661 C11.7210258,18.4319196 11.836063,18.3716518 11.9961148,18.3515625 C12.1461634,18.3314732 12.2662022,18.3766741 12.3562314,18.4871652 L12.3862411,18.5172991 C13.5166069,19.5117188 14.7320003,20.1395089 16.0324212,20.4006696 C16.402541,20.4810268 16.7726608,20.5212054 17.1427806,20.5212054 C17.9530428,20.5212054 18.6657735,20.3052455 19.2809726,19.8733259 C19.8961718,19.4414062 20.2037713,18.828683 20.2037713,18.0351562 C20.2037713,17.7539062 20.128747,17.4877232 19.9786985,17.2366071 C19.8286499,16.9854911 19.6610957,16.7745536 19.4760358,16.6037946 C19.2909759,16.4330357 18.9983812,16.2446987 18.5982517,16.0387835 C18.1981222,15.8328683 17.8680153,15.672154 17.6079311,15.5566406 C17.347847,15.4411272 16.9477175,15.2779018 16.4075426,15.0669643 C16.0174164,14.90625 15.7098168,14.780692 15.4847439,14.6902902 C15.2596711,14.5998884 14.9520715,14.4667969 14.5619453,14.2910156 C14.171819,14.1152344 13.8592178,13.9595424 13.6241417,13.8239397 C13.3890657,13.6883371 13.1064742,13.5100446 12.7763674,13.2890625 C12.4462605,13.0680804 12.1786739,12.8546317 11.9736075,12.6487165 C11.7685412,12.4428013 11.5509707,12.1967076 11.3208963,11.9104353 C11.0908218,11.6241629 10.9132643,11.3328683 10.7882239,11.0365513 C10.6631834,10.7402344 10.5581494,10.40625 10.4731219,10.0345982 C10.3880944,9.66294643 10.3455806,9.27120536 10.3455806,8.859375 C10.3455806,7.47321429 10.8357392,6.2578125 11.8160565,5.21316964 C12.7963738,4.16852679 14.0717866,3.49553571 15.6422949,3.19419643 L15.6422949,0.482142857 C15.6422949,0.3515625 15.6898103,0.238560268 15.7848411,0.143136161 C15.8798718,0.0477120536 15.9924083,0 16.1224503,0 L18.148106,0 C18.2881513,0 18.4031885,0.0452008929 18.4932177,0.135602679 C18.5832468,0.226004464 18.6282614,0.341517857 18.6282614,0.482142857 L18.6282614,3.13392857 C19.1984459,3.19419643 19.7511248,3.30970982 20.286298,3.48046875 C20.8214712,3.65122768 21.2566121,3.81947545 21.5917205,3.98521205 C21.926829,4.15094866 22.2444318,4.33928571 22.5445289,4.55022321 C22.8446261,4.76116071 23.0396892,4.90680804 23.1297183,4.98716518 C23.2197475,5.06752232 23.2947717,5.13783482 23.3547912,5.19810268 C23.5248462,5.37890625 23.5498543,5.56975446 23.4298155,5.77064732 L22.2144221,7.97042411 C22.1343962,8.12109375 22.0193589,8.20145089 21.8693104,8.21149554 C21.7292651,8.24162946 21.5942213,8.20647321 21.4641793,8.10602679 C21.4341695,8.07589286 21.3616461,8.015625 21.2466088,7.92522321 C21.1315716,7.83482143 20.9365085,7.70172991 20.6614194,7.52594866 C20.3863304,7.35016741 20.0937357,7.18945313 19.7836353,7.0438058 C19.473535,6.89815848 19.1009144,6.76757813 18.6657735,6.65206473 C18.2306327,6.53655134 17.8029943,6.47879464 17.3828583,6.47879464 C16.4325507,6.47879464 15.6572998,6.69475446 15.0571055,7.12667411 C14.4569113,7.55859375 14.1568141,8.11607143 14.1568141,8.79910714 C14.1568141,9.06026786 14.1993279,9.30133929 14.2843554,9.52232143 C14.3693829,9.74330357 14.5169307,9.95172991 14.7269987,10.1476004 C14.9370667,10.343471 15.1346306,10.5092076 15.3196905,10.6448103 C15.5047504,10.7804129 15.7848411,10.9361049 16.1599625,11.1118862 C16.5350839,11.2876674 16.8376818,11.4232701 17.0677563,11.5186942 C17.2978308,11.6141183 17.6479441,11.7522321 18.1180963,11.9330357 C18.6482679,12.1339286 19.053399,12.2921317 19.3334896,12.4076451 C19.6135803,12.5231585 19.9937033,12.6989397 20.4738587,12.9349888 C20.9540141,13.1710379 21.3316364,13.3844866 21.6067254,13.5753348 C21.8818144,13.766183 22.1919148,14.0172991 22.5370265,14.328683 C22.8821382,14.640067 23.147224,14.9589844 23.3322839,15.2854353 C23.5173438,15.6118862 23.6748948,15.9960938 23.8049369,16.438058 C23.934979,16.8800223 24,17.3521205 24,17.8543527 L24,17.8543527 Z" fill="#A6C4DA" transform="translate(17.000000, 13.500000) scale(-1, 1) translate(-17.000000, -13.500000) "></path>
        </svg>
        <h1 class="site-name">{{ api.title or 'fava' }}{{ ' ▾' if config['APIS']|length > 1 else '' }}<strong>{{ page_title }}</strong>
            {% if config['APIS']|length > 1 %}
            <div class="beancount-files">
                <ul>
                {% for file_slug, file_api in config['APIS'].items() %}
                    <li{% if file_slug == g.beancount_file_slug %} class="selected"{% endif %}>
                    <a href="{{ url_for('index', bfile=file_slug) }}">{{ file_api.title or 'fava' }}</a>
                    </li>
                {% endfor %}
                </ul>
        </div>{% endif %}</h1>
        {% if show_filters %}
        <nav>
            {% include "_entry_filters.html" %}
        </nav>
        {% endif %}
    </header>
    <a href="#" id="aside_button">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="32px" width="32px" enable-background="new 0 0 24 24" id="Layer_1" version="1.0" viewBox="0 0 24 24" xml:space="preserve"><circle cx="12" cy="12" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="12" cy="19" r="2"/></svg>
    </a>
    <aside>
        {% if api.sidebar_links %}
            <h3>{{ _('Custom Links') }}</h3>
            <ul class="navigation">
                {% for label, link in api.sidebar_links %}
                    <li><a href="{{ link }}">{{ label }}</a></li>
                {% endfor %}
            </ul>
            <h3>{{ _('Reports') }}</h3>
        {% endif %}
        {% for title_, menuitems in navigation_bar %}
            {% if title_ %}<h3>{{ title_ }}</h3>{% endif %}
            <ul class="navigation">
            {% for id in menuitems %}
                <li{% if id == active_page %} class="selected"{% endif %}><a href="{{ url_for('report', report_name=id) }}">{{ all_pages[id].0|e }}</a>
                {% if id == "query" and user_queries|length > 0 %}
                    <ul class="navigation">
                    {% for query in user_queries %}
                        <li{% if query.name == name %} class="selected"{% endif %}><a href="{{ url_for('query', query_string=query.query_string, name=query.name) }}">{{ query.name|truncate(25, True, ' …') }}</a></li>
                    {% endfor %}
                    </ul>
                {% endif %}
                </li>
                {% if id == "source" and api.errors|length > 0 %}
                    <li class="error">
                        <a href="{{ url_for('report', report_name='errors') }}">
                        {{ _('Errors') }} <span class="bubble">{{ api.errors|length }}</span>
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
            </ul>
        {% endfor %}
    </aside>
    <article id="page-{{ active_page }}">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="warnings">
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    {% endwith %}
        {% block content %}{% endblock %}
    </article>
    {% include "overlays/_keyboard_shortcuts.html" %}
    {% include "overlays/_documents_upload.html" %}

    <script type="text/javascript" src="{{ url_for('static', filename='gen/app.js') }}"></script>
    <script>
        // Jumping to pages:
        Mousetrap.bind({
            {% for key, value in all_pages|dictsort %}
            '{{ value.1 }}': function() { window.location = '{{ url_for('report', report_name=key) }}'; },
            {% endfor %}
        }, 'keyup');

        window.documentsFolders = {{ api.options['documents']|tojson|safe }};
        window.documentsUploadUrl = "{{ url_for('add_document') }}";
    </script>
    {% block javascript %}{% endblock %}
</body>
</html>
